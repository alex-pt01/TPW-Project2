<div>
  <img src="assets/images/drone.jpg" >

</div>

<div style="margin-left:100px" class="features_items">
  <br><br>
  <h2 style="font-size: 20px;" class="title text-center">Popular products </h2>
  <div  class="container"  *ngFor="let product of allProducts" >
    <div class="card">
      <a routerLink="/details/{{product.id}}">
        <div class="imgBx">
          <img src="{{ product.image }}">
        </div>
      </a>
      <div class="contentBx">
        <h3 style="color: black">{{product.name}}</h3>
        <p>({{ product.condition }}) by {{ product.seller }}</p>
        <p>
          <a class="price" *ngIf="product.promotion" style="text-decoration: line-through">{{ product.price }} €</a>
          <a class="price" *ngIf="product.promotion">{{ product.price- product.price*product.promotion.discount }} €</a>
          <a class="price" *ngIf="product.promotion == null">{{ product.price }} €</a>
          <a *ngIf="product.quantity!=0"  > <span class="not-in-stock">Stock</span></a>
          <a *ngIf="product.quantity==0"  > <span class="not-in-stock">Not In Stock</span></a>
        </p>


      </div>
    </div>

  </div>


  <div  style="margin-top: 450px" >
    <br><br><br>
    <h2 style="font-size: 20px;" class="title text-center">Comments </h2>

    <div class="col-sm-12"   >


      <p></p>
      <table class="styled-table" style="margin: 0 auto; width: 1000px; height: 400px;  border: solid black 2px;">
        <tr style="background-color: steelblue; color:white">
          <th style="font-size: 16px">UserName</th>
          <th style="font-size: 16px">Email</th>
          <th style="font-size: 16px">Description</th>
          <th style="font-size: 16px">Rating</th>
          <th style="font-size: 16px">commentDate</th>
          <th style="font-size: 16px">ProductName</th>

        </tr>

        <tr *ngFor="let comment of
           comments">
          <th >{{ comment.userName }}</th>
          <th >{{ comment.userEmail }}</th>
          <th >{{ comment.description }}</th>
          <th >{{ comment.rating }}</th>
          <th >{{ comment.commentDate }}</th>
          <th *ngIf="comment.product">{{ comment.product.name }}</th>
          <th *ngIf="!comment.product">-------</th>


        </tr>
      </table>
    </div>
  </div>
  <br><br><br>
  <h2 style="font-size: 20px;" class="title text-center">Add Comment </h2>

  <div style="margin: 0 auto;width: 800px; height: 400px; margin-bottom: 500px ">

    <div *ngIf="commentForm "  >
      <form id="form-box"  method="post" (ngSubmit)="create()" [formGroup]="commentForm"  >


        <h2 class="form-header" style="font-size: 20px">Create Comment</h2>
        <div>
          <p *ngIf="commentForm.controls['userName'].invalid" style="color:red; font-size: 18px">Insert your name</p>
          <input formControlName="userName" type="text" class="form-input"/>
          <br>
          <p *ngIf="commentForm.controls['userEmail'].invalid" style="color:red; font-size: 18px">Insert your email</p>
          <input formControlName="userEmail" type="text" class="form-input"/>
          <br>
          <p *ngIf="commentForm.controls['description'].invalid" style="color:red; font-size: 18px">Insert a Description</p>
          <input formControlName="description" type="text" class="form-input"/>
          <br>
          <p *ngIf="commentForm.controls['rating'].invalid" style="color:red; font-size: 18px">Insert a product rating</p>
          <input formControlName="rating" type="number" class="form-input"/>
          <br>
          <p *ngIf="commentForm.controls['commentDate'].invalid" style="color:red; font-size: 18px">Insert a comment date</p>
          <input formControlName="commentDate" type="date" class="form-input"/>
          <br>
          <div style="font-size: 18px" class="form-header">Promotion</div>
          <select formControlName="product" style="width:30%; margin-right: 10px">
            <option>-------</option>
            <option *ngFor="let p of PRODUCTS">
              {{p.name}}
            </option>
          </select>
        </div>
        <input style="float: right; font-size: 16px" type="submit"   class="btn btn-default check_out" value="Save"/>
        <br><br>
      </form>

    </div>

  </div>



</div>
